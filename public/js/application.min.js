!function t(n,o,e){function i(r,s){if(!o[r]){if(!n[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=o[r]={exports:{}};n[r][0].call(l.exports,function(t){var o=n[r][1][t];return i(o?o:t)},l,l.exports,t,n,o,e)}return o[r].exports}for(var a="function"==typeof require&&require,r=0;r<e.length;r++)i(e[r]);return i}({"./src/application.js":[function(t){"use strict";function n(){Modernizr.history&&window.history.replaceState(null,null,document.URL),i(),v()}function o(t){B=t,C=new z(t),$("#input-target").on("click",f),$("#location-form").on("submit",g),$("#about-link").on("click",j),$("#about-close").on("click",T),$("#example-link").on("click",a),$("#dismiss-ie-browser").on("click",e),$("#input-location").focus(),C.render(),$("#map").addClass("no-panning"),$(document).keydown(function(t){27===t.which&&t.ctrlKey===!1&&t.metaKey===!1&&u()}),Modernizr.svg||($("#fallback-shield").html('<img src="/img/white_shield.png">'),$("#fallback-flag-tag").html('<img src="/img/flag-tag.png" alt="Code for America" width="32" height="8">'))}function e(t){t.preventDefault(),$(".ie-browser").hide()}function i(){var t=window.location.search.substr(1),n=t.split("="),o=n[0],e=n[1];switch(o){case"about":U();break;case"latlng":if(!e){s();break}var i=parseFloat(e.split(",")[0]),a=parseFloat(e.split(",")[1]);i&&a?b(i,a):s();break;case"address":e?S(decodeURIComponent(e)):s();break;default:s()}}function a(t){t.preventDefault();var n=$("#example-link").text();$("#input-location").val(n)}function r(){var t=q.examples||[];if(t.length>0){var n=Math.floor(Math.random()*t.length);$("#example-link").text(t[n])}}function s(){$("#question").show(),$("#input-location").val(""),$("#alert").hide(),I(),k(),$("#question").fadeIn(150),$("#input-location").focus(),$("#map").addClass("no-panning"),r(),C&&C.reset()}function u(){s(),Modernizr.history?window.history.pushState({},null,"/"):window.location="/"}function c(t){t.preventDefault(),u()}function l(t,n){var o;o="Yes"===t?n:q.responseNo,$("#question").fadeOut(250,function(){C.createMarker(A,L),C.createPopup(A,L,t,o),C.setLocation(A,L,q.finalZoom),$("#map").removeClass("no-panning"),$("#reset-button").on("click",c)})}function d(t,n){for(var o={type:"Point",coordinates:[n,t]},e="",i=0;i<B.features.length;i++){var a=B.features[i],r=a.geometry,s=N.pointInPolygon(o,r);s&&(e=a.properties&&a.properties.NAME?a.properties.NAME:"NO NAME FOUND")}e?h(e):p()}function h(t){l("Yes",t)}function p(){l("No")}function f(){$("#input-target .loading-text").show(),$("#input-target .default-text").hide(),M()}function g(t){t.preventDefault(),m()}function m(){var t=$("#input-location"),n=t.val();return""!==n?(P(n),Modernizr.history?window.history.pushState({page:"address",address:n},null,"/?address="+encodeURIComponent(n)):window.location="/?address="+encodeURIComponent(n)):y("Please enter an address"),!1}function y(t){$("#alert").html(t).slideDown(100)}function v(){var t=function(t){A=t.coords.latitude,L=t.coords.longitude};O(t)}function M(){var t=function(t){A=t.coords.latitude,L=t.coords.longitude,w(A,L)},n=function(t){console.log(t),alert("Unable to retrieve current position. Geolocation may be disabled on this browser or unavailable on this system."),k()};O(t,n)}function w(){b(A,L),x(A,L)}function b(t,n){A=t,L=n;var o=function(){B.features&&B.features.length>0?d(A,L):window.setTimeout(o,500)};o()}function x(t,n){var o="?latlng="+t+","+n;Modernizr.history?window.history.pushState({page:"latlng",latitude:t,longitude:n},null,o):window.location=o}function k(){$("#input-target .loading-text").hide(),$("#input-target .default-text").show()}function P(t){R(t,q.regionBias,function(t){if(t&&t.results.length>0){var n=t.results[0].geometry.location;A=n.lat,L=n.lng;var o=function(){B.features&&B.features.length>0?d(A,L):window.setTimeout(o,500)};o()}else $("#question").show(),y("No results for this address!")})}function S(t){P(t)}function j(t){t.preventDefault(),Modernizr.history?window.history.pushState({page:"about"},null,"?about"):window.location="?about",D()}function D(){$("#location-form").fadeOut(200,function(){$("#about").fadeIn(200)})}function U(){$("#question").show(),$("#location-form").hide(),$("#about").show()}function T(t){t.preventDefault(),u()}function I(){$("#about").fadeOut(200,function(){$("#location-form").fadeIn(200)})}var C,A,L,N=t("geojson-utils"),R=t("./geocode"),O=t("./current_location"),z=t("./map"),q=t("../config"),B={};window.onpopstate=function(t){if(!t.state)return void i();switch(t.state.page){case"about":D();break;case"latlng":b(t.state.latitude,t.state.longitude);break;case"address":S(t.state.address);break;default:s()}},n(),$.getJSON(q.fileName,function(t){o(t)})},{"../config":"/Users/erniehsiung/Sites/amiinmiami/config.js","./current_location":"/Users/erniehsiung/Sites/amiinmiami/src/current_location.js","./geocode":"/Users/erniehsiung/Sites/amiinmiami/src/geocode.js","./map":"/Users/erniehsiung/Sites/amiinmiami/src/map.js","geojson-utils":"/Users/erniehsiung/Sites/amiinmiami/node_modules/geojson-utils/geojson-utils.js"}],"/Users/erniehsiung/Sites/amiinmiami/config.js":[function(t,n){var o={name:"Miami-Dade County",latitude:25.7667,longitude:-80.2,regionBias:"25.25,-80|26,-79",initialZoom:13,finalZoom:14,fileName:"/data/region.geojson",tagline:"Are you getting city services from a city, or from Miami-Dade County?",about:"Miami-Dade County is the seventh largest county in the nation with 34 municipalities, but also an unincorporated municipal service area (UMSA) that services more than a million people. Use this app to figure out whether an address is in a city or within UMSA!",responseYes:"You are living inside a Miami-Dade municipality.",responseNo:"You're living in an unincorporated area of the county.",examples:["90 NW 29th Street","9806 NE 2nd Ave","8821 SW 136th Street"]};n.exports=o},{}],"/Users/erniehsiung/Sites/amiinmiami/node_modules/geojson-utils/geojson-utils.js":[function(t,n){!function(){function t(t){for(var n=[],o=[],e=0;e<t[0].length;e++)n.push(t[0][e][1]),o.push(t[0][e][0]);return n=n.sort(function(t,n){return t-n}),o=o.sort(function(t,n){return t-n}),[[n[0],o[0]],[n[n.length-1],o[o.length-1]]]}function o(t,n,o){for(var e=[[0,0]],i=0;i<o.length;i++){for(var a=0;a<o[i].length;a++)e.push(o[i][a]);e.push(o[i][0]),e.push([0,0])}for(var r=!1,i=0,a=e.length-1;i<e.length;a=i++)e[i][0]>n!=e[a][0]>n&&t<(e[a][1]-e[i][1])*(n-e[i][0])/(e[a][0]-e[i][0])+e[i][1]&&(r=!r);return r}var e=this.gju={};"undefined"!=typeof n&&n.exports&&(n.exports=e),e.lineStringsIntersect=function(t,n){for(var o=[],e=0;e<=t.coordinates.length-2;++e)for(var i=0;i<=n.coordinates.length-2;++i){var a={x:t.coordinates[e][1],y:t.coordinates[e][0]},r={x:t.coordinates[e+1][1],y:t.coordinates[e+1][0]},s={x:n.coordinates[i][1],y:n.coordinates[i][0]},u={x:n.coordinates[i+1][1],y:n.coordinates[i+1][0]},c=(u.x-s.x)*(a.y-s.y)-(u.y-s.y)*(a.x-s.x),l=(r.x-a.x)*(a.y-s.y)-(r.y-a.y)*(a.x-s.x),d=(u.y-s.y)*(r.x-a.x)-(u.x-s.x)*(r.y-a.y);if(0!=d){var h=c/d,p=l/d;h>=0&&1>=h&&p>=0&&1>=p&&o.push({type:"Point",coordinates:[a.x+h*(r.x-a.x),a.y+h*(r.y-a.y)]})}}return 0==o.length&&(o=!1),o},e.pointInBoundingBox=function(t,n){return!(t.coordinates[1]<n[0][0]||t.coordinates[1]>n[1][0]||t.coordinates[0]<n[0][1]||t.coordinates[0]>n[1][1])},e.pointInPolygon=function(n,i){for(var a="Polygon"==i.type?[i.coordinates]:i.coordinates,r=!1,s=0;s<a.length;s++)e.pointInBoundingBox(n,t(a[s]))&&(r=!0);if(!r)return!1;for(var u=!1,s=0;s<a.length;s++)o(n.coordinates[1],n.coordinates[0],a[s])&&(u=!0);return u},e.pointInMultiPolygon=function(n,i){for(var a="MultiPolygon"==i.type?[i.coordinates]:i.coordinates,r=!1,s=!1,u=0;u<a.length;u++){for(var c=a[u],l=0;l<c.length;l++)r||e.pointInBoundingBox(n,t(c[l]))&&(r=!0);if(!r)return!1;for(var l=0;l<c.length;l++)s||o(n.coordinates[1],n.coordinates[0],c[l])&&(s=!0)}return s},e.numberToRadius=function(t){return t*Math.PI/180},e.numberToDegree=function(t){return 180*t/Math.PI},e.drawCircle=function(t,n,o){for(var i=[n.coordinates[1],n.coordinates[0]],a=t/1e3/6371,r=[e.numberToRadius(i[0]),e.numberToRadius(i[1])],o=o||15,s=[[i[0],i[1]]],u=0;o>u;u++){var c=2*Math.PI*u/o,l=Math.asin(Math.sin(r[0])*Math.cos(a)+Math.cos(r[0])*Math.sin(a)*Math.cos(c)),d=r[1]+Math.atan2(Math.sin(c)*Math.sin(a)*Math.cos(r[0]),Math.cos(a)-Math.sin(r[0])*Math.sin(l));s[u]=[],s[u][1]=e.numberToDegree(l),s[u][0]=e.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},e.rectangleCentroid=function(t){var n=t.coordinates[0],o=n[0][0],e=n[0][1],i=n[2][0],a=n[2][1],r=i-o,s=a-e;return{type:"Point",coordinates:[o+r/2,e+s/2]}},e.pointDistance=function(t,n){var o=t.coordinates[0],i=t.coordinates[1],a=n.coordinates[0],r=n.coordinates[1],s=e.numberToRadius(r-i),u=e.numberToRadius(a-o),c=Math.pow(Math.sin(s/2),2)+Math.cos(e.numberToRadius(i))*Math.cos(e.numberToRadius(r))*Math.pow(Math.sin(u/2),2),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return 6371*l*1e3},e.geometryWithinRadius=function(t,n,o){if("Point"==t.type)return e.pointDistance(t,n)<=o;if("LineString"==t.type||"Polygon"==t.type){var i,a={};i="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var r in i)if(a.coordinates=i[r],e.pointDistance(a,n)>o)return!1}return!0},e.area=function(t){for(var n,o,e=0,i=t.coordinates[0],a=i.length-1,r=0;r<i.length;a=r++){var n={x:i[r][1],y:i[r][0]},o={x:i[a][1],y:i[a][0]};e+=n.x*o.y,e-=n.y*o.x}return e/=2},e.centroid=function(t){for(var n,o,i,a=0,r=0,s=t.coordinates[0],u=s.length-1,c=0;c<s.length;u=c++){var o={x:s[c][1],y:s[c][0]},i={x:s[u][1],y:s[u][0]};n=o.x*i.y-i.x*o.y,a+=(o.x+i.x)*n,r+=(o.y+i.y)*n}return n=6*e.area(t),{type:"Point",coordinates:[r/n,a/n]}},e.simplify=function(t,n){n=n||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var o,e,i,a,r,s,u,c,l,d,h,p,f,g,m,y,v,M,w,b=Math.PI/180*.5,x=new Array,$=new Array,k=new Array;if(t.length<3)return t;for(o=t.length,d=360*n/(2*Math.PI*6378137),d*=d,i=0,$[0]=0,k[0]=o-1,e=1;e>0;)if(a=$[e-1],r=k[e-1],e--,r-a>1){for(h=t[r].lng()-t[a].lng(),p=t[r].lat()-t[a].lat(),Math.abs(h)>180&&(h=360-Math.abs(h)),h*=Math.cos(b*(t[r].lat()+t[a].lat())),f=h*h+p*p,s=a+1,u=a,l=-1;r>s;s++)g=t[s].lng()-t[a].lng(),m=t[s].lat()-t[a].lat(),Math.abs(g)>180&&(g=360-Math.abs(g)),g*=Math.cos(b*(t[s].lat()+t[a].lat())),y=g*g+m*m,v=t[s].lng()-t[r].lng(),M=t[s].lat()-t[r].lat(),Math.abs(v)>180&&(v=360-Math.abs(v)),v*=Math.cos(b*(t[s].lat()+t[r].lat())),w=v*v+M*M,c=y>=f+w?w:w>=f+y?y:(g*p-m*h)*(g*p-m*h)/f,c>l&&(u=s,l=c);d>l?(x[i]=a,i++):(e++,$[e-1]=u,k[e-1]=r,e++,$[e-1]=a,k[e-1]=u)}else x[i]=a,i++;x[i]=o-1,i++;for(var P=new Array,s=0;i>s;s++)P.push(t[x[s]]);return P.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},e.destinationPoint=function(t,n,o){o/=6371,n=e.numberToRadius(n);var i=e.numberToRadius(t.coordinates[0]),a=e.numberToRadius(t.coordinates[1]),r=Math.asin(Math.sin(a)*Math.cos(o)+Math.cos(a)*Math.sin(o)*Math.cos(n)),s=i+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(a),Math.cos(o)-Math.sin(a)*Math.sin(r));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[e.numberToDegree(s),e.numberToDegree(r)]}}}()},{}],"/Users/erniehsiung/Sites/amiinmiami/src/current_location.js":[function(t,n){var o=function(t,n){var o=window.navigator.geolocation,e={enableHighAccuracy:!0,maximumAge:1e4};o?window.setTimeout(function(){o.getCurrentPosition(t,n,e)},0):console.log("Browser does not support geolocation")};n.exports=o},{}],"/Users/erniehsiung/Sites/amiinmiami/src/geocode.js":[function(t,n){"use strict";var o="https://maps.googleapis.com/maps/api/geocode/json",e=function(t,n,e){var i={address:t,bounds:n,sensor:!1},a=o+"?"+$.param(i);$.ajax(a,{success:e})};n.exports=e},{}],"/Users/erniehsiung/Sites/amiinmiami/src/map.js":[function(t,n){"use strict";var o=t("../config"),e='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',i="//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",a="/img/marker.svg";window.devicePixelRatio>1&&(i="//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}@2x.png"),Modernizr.svg||(a="/img/marker.png");var r=function(t){this.json=t,this.map=L.map("map",{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,closePopupOnClick:!1,keyboard:!1,zoomControl:!1}),this.markers=[]},s=L.icon({iconUrl:a,shadowUrl:"/img/marker_shadow.png",iconSize:[36,43],shadowSize:[100,50],iconAnchor:[18,43],shadowAnchor:[40,44],popupAnchor:[0,-50]});r.prototype.render=function(){L.tileLayer(i,{attribution:e,maxZoom:23}).addTo(this.map),L.geoJson(this.json,{style:function(){var t=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),e="rgb("+t+" ,"+n+","+o+")";return{color:e,weight:5,opacity:.1}}}).addTo(this.map),this.reset()},r.prototype.reset=function(){this.removeMarkers(),this.setLocation(o.latitude,o.longitude,o.initialZoom),this.map.closePopup(),this.map.dragging.disable()},r.prototype.setLocation=function(t,n,o){return t+=.01,this.map.setView([t,n],o),this.map.dragging.enable(),!0},r.prototype.createMarker=function(t,n){var o=L.marker([t,n],{icon:s,clickable:!1}).addTo(this.map);return this.markers.push(o),!0},r.prototype.createPopup=function(t,n,o,e){var i="";i+='<div class="popup-background"><svg class="svg-popup"><use xlink:href="#svg-popup"></svg></div>',i+="<h2>"+o+"</h2><p>"+e+"</p>",i+='<button id="reset-button">Again?</button>',L.popup({autoPan:!1,closeButton:!1}).setLatLng([t,n]).setContent(i).openOn(this.map)},r.prototype.removeMarkers=function(){for(var t=0;t<this.markers.length;t++)this.map.removeLayer(this.markers[t]);return!0},n.exports=r},{"../config":"/Users/erniehsiung/Sites/amiinmiami/config.js"}]},{},["./src/application.js"]);