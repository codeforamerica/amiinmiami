!function t(o,n,e){function a(i,s){if(!n[i]){if(!o[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(r)return r(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=n[i]={exports:{}};o[i][0].call(c.exports,function(t){var n=o[i][1][t];return a(n?n:t)},c,c.exports,t,o,n,e)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<e.length;i++)a(e[i]);return a}({1:[function(t,o){var n={name:"Miami",latitude:25.7667,longitude:-80.2,regionBias:"25.25,-80|26,-79",initialZoom:13,finalZoom:14,fileName:"/data/region.geojson",tagline:"Because there is more to Miami than you think there is.",about:"Las Vegas is one of the most visited cities in the world, and yet its most famous destination &mdash; a 6.8km boulevard of extravagantly themed casinos commonly known as ‘The Strip’ &mdash; is actually located outside of Las Vegas city limits.  To add to the confusion, the city’s true borders are often jagged and full of small holes.  According to the U.S. Postal Service, local residents may still claim a Las Vegas address, even if they are under the jurisdiction of one of the surrounding unincorporated communities throughout Clark County.  As a result, the City of Las Vegas requires residents verify that they reside within city limits to receive city services.",responseYes:"You are within city limits!",responseNo:"You're UMSA or not in the County.",examples:["90 NW 29th Street","9806 NE 2nd Ave","8821 SW 136th Street"]};o.exports=n},{}],2:[function(t,o){!function(){function t(t){for(var o=[],n=[],e=0;e<t[0].length;e++)o.push(t[0][e][1]),n.push(t[0][e][0]);return o=o.sort(function(t,o){return t-o}),n=n.sort(function(t,o){return t-o}),[[o[0],n[0]],[o[o.length-1],n[n.length-1]]]}function n(t,o,n){for(var e=[[0,0]],a=0;a<n.length;a++){for(var r=0;r<n[a].length;r++)e.push(n[a][r]);e.push(n[a][0]),e.push([0,0])}for(var i=!1,a=0,r=e.length-1;a<e.length;r=a++)e[a][0]>o!=e[r][0]>o&&t<(e[r][1]-e[a][1])*(o-e[a][0])/(e[r][0]-e[a][0])+e[a][1]&&(i=!i);return i}var e=this.gju={};"undefined"!=typeof o&&o.exports&&(o.exports=e),e.lineStringsIntersect=function(t,o){for(var n=[],e=0;e<=t.coordinates.length-2;++e)for(var a=0;a<=o.coordinates.length-2;++a){var r={x:t.coordinates[e][1],y:t.coordinates[e][0]},i={x:t.coordinates[e+1][1],y:t.coordinates[e+1][0]},s={x:o.coordinates[a][1],y:o.coordinates[a][0]},u={x:o.coordinates[a+1][1],y:o.coordinates[a+1][0]},c=(u.x-s.x)*(r.y-s.y)-(u.y-s.y)*(r.x-s.x),l=(i.x-r.x)*(r.y-s.y)-(i.y-r.y)*(r.x-s.x),d=(u.y-s.y)*(i.x-r.x)-(u.x-s.x)*(i.y-r.y);if(0!=d){var h=c/d,f=l/d;h>=0&&1>=h&&f>=0&&1>=f&&n.push({type:"Point",coordinates:[r.x+h*(i.x-r.x),r.y+h*(i.y-r.y)]})}}return 0==n.length&&(n=!1),n},e.pointInBoundingBox=function(t,o){return!(t.coordinates[1]<o[0][0]||t.coordinates[1]>o[1][0]||t.coordinates[0]<o[0][1]||t.coordinates[0]>o[1][1])},e.pointInPolygon=function(o,a){for(var r="Polygon"==a.type?[a.coordinates]:a.coordinates,i=!1,s=0;s<r.length;s++)e.pointInBoundingBox(o,t(r[s]))&&(i=!0);if(!i)return!1;for(var u=!1,s=0;s<r.length;s++)n(o.coordinates[1],o.coordinates[0],r[s])&&(u=!0);return u},e.pointInMultiPolygon=function(o,a){for(var r="MultiPolygon"==a.type?[a.coordinates]:a.coordinates,i=!1,s=!1,u=0;u<r.length;u++){for(var c=r[u],l=0;l<c.length;l++)i||e.pointInBoundingBox(o,t(c[l]))&&(i=!0);if(!i)return!1;for(var l=0;l<c.length;l++)s||n(o.coordinates[1],o.coordinates[0],c[l])&&(s=!0)}return s},e.numberToRadius=function(t){return t*Math.PI/180},e.numberToDegree=function(t){return 180*t/Math.PI},e.drawCircle=function(t,o,n){for(var a=[o.coordinates[1],o.coordinates[0]],r=t/1e3/6371,i=[e.numberToRadius(a[0]),e.numberToRadius(a[1])],n=n||15,s=[[a[0],a[1]]],u=0;n>u;u++){var c=2*Math.PI*u/n,l=Math.asin(Math.sin(i[0])*Math.cos(r)+Math.cos(i[0])*Math.sin(r)*Math.cos(c)),d=i[1]+Math.atan2(Math.sin(c)*Math.sin(r)*Math.cos(i[0]),Math.cos(r)-Math.sin(i[0])*Math.sin(l));s[u]=[],s[u][1]=e.numberToDegree(l),s[u][0]=e.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},e.rectangleCentroid=function(t){var o=t.coordinates[0],n=o[0][0],e=o[0][1],a=o[2][0],r=o[2][1],i=a-n,s=r-e;return{type:"Point",coordinates:[n+i/2,e+s/2]}},e.pointDistance=function(t,o){var n=t.coordinates[0],a=t.coordinates[1],r=o.coordinates[0],i=o.coordinates[1],s=e.numberToRadius(i-a),u=e.numberToRadius(r-n),c=Math.pow(Math.sin(s/2),2)+Math.cos(e.numberToRadius(a))*Math.cos(e.numberToRadius(i))*Math.pow(Math.sin(u/2),2),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return 6371*l*1e3},e.geometryWithinRadius=function(t,o,n){if("Point"==t.type)return e.pointDistance(t,o)<=n;if("LineString"==t.type||"Polygon"==t.type){var a,r={};a="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var i in a)if(r.coordinates=a[i],e.pointDistance(r,o)>n)return!1}return!0},e.area=function(t){for(var o,n,e=0,a=t.coordinates[0],r=a.length-1,i=0;i<a.length;r=i++){var o={x:a[i][1],y:a[i][0]},n={x:a[r][1],y:a[r][0]};e+=o.x*n.y,e-=o.y*n.x}return e/=2},e.centroid=function(t){for(var o,n,a,r=0,i=0,s=t.coordinates[0],u=s.length-1,c=0;c<s.length;u=c++){var n={x:s[c][1],y:s[c][0]},a={x:s[u][1],y:s[u][0]};o=n.x*a.y-a.x*n.y,r+=(n.x+a.x)*o,i+=(n.y+a.y)*o}return o=6*e.area(t),{type:"Point",coordinates:[i/o,r/o]}},e.simplify=function(t,o){o=o||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var n,e,a,r,i,s,u,c,l,d,h,f,p,g,m,y,v,M,w,b=Math.PI/180*.5,x=new Array,k=new Array,$=new Array;if(t.length<3)return t;for(n=t.length,d=360*o/(2*Math.PI*6378137),d*=d,a=0,k[0]=0,$[0]=n-1,e=1;e>0;)if(r=k[e-1],i=$[e-1],e--,i-r>1){for(h=t[i].lng()-t[r].lng(),f=t[i].lat()-t[r].lat(),Math.abs(h)>180&&(h=360-Math.abs(h)),h*=Math.cos(b*(t[i].lat()+t[r].lat())),p=h*h+f*f,s=r+1,u=r,l=-1;i>s;s++)g=t[s].lng()-t[r].lng(),m=t[s].lat()-t[r].lat(),Math.abs(g)>180&&(g=360-Math.abs(g)),g*=Math.cos(b*(t[s].lat()+t[r].lat())),y=g*g+m*m,v=t[s].lng()-t[i].lng(),M=t[s].lat()-t[i].lat(),Math.abs(v)>180&&(v=360-Math.abs(v)),v*=Math.cos(b*(t[s].lat()+t[i].lat())),w=v*v+M*M,c=y>=p+w?w:w>=p+y?y:(g*f-m*h)*(g*f-m*h)/p,c>l&&(u=s,l=c);d>l?(x[a]=r,a++):(e++,k[e-1]=u,$[e-1]=i,e++,k[e-1]=r,$[e-1]=u)}else x[a]=r,a++;x[a]=n-1,a++;for(var P=new Array,s=0;a>s;s++)P.push(t[x[s]]);return P.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},e.destinationPoint=function(t,o,n){n/=6371,o=e.numberToRadius(o);var a=e.numberToRadius(t.coordinates[0]),r=e.numberToRadius(t.coordinates[1]),i=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(o)),s=a+Math.atan2(Math.sin(o)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(i));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[e.numberToDegree(s),e.numberToDegree(i)]}}}()},{}],3:[function(t){"use strict";function o(){Modernizr.history&&window.history.replaceState(null,null,document.URL),a(),v()}function n(t){U=t,A=new j(t),$("#input-target").on("click",p),$("#location-form").on("submit",g),$("#about-link").on("click",C),$("#about-close").on("click",D),$("#example-link").on("click",r),$("#dismiss-ie-browser").on("click",e),$("#input-location").focus(),A.render(),$("#map").addClass("no-panning"),$(document).keydown(function(t){27===t.which&&t.ctrlKey===!1&&t.metaKey===!1&&u()}),Modernizr.svg||($("#fallback-shield").html('<img src="/img/white_shield.png">'),$("#fallback-flag-tag").html('<img src="/img/flag-tag.png" alt="Code for America" width="32" height="8">'))}function e(t){t.preventDefault(),$(".ie-browser").hide()}function a(){var t=window.location.search.substr(1),o=t.split("="),n=o[0],e=o[1];switch(n){case"about":L();break;case"latlng":if(!e){s();break}var a=parseFloat(e.split(",")[0]),r=parseFloat(e.split(",")[1]);a&&r?b(a,r):s();break;case"address":e?T(decodeURIComponent(e)):s();break;default:s()}}function r(t){t.preventDefault();var o=$("#example-link").text();$("#input-location").val(o)}function i(){var t=O.examples||[];if(t.length>0){var o=Math.floor(Math.random()*t.length);$("#example-link").text(t[o])}}function s(){$("#question").show(),$("#input-location").val(""),$("#alert").hide(),S(),k(),$("#question").fadeIn(150),$("#input-location").focus(),$("#map").addClass("no-panning"),i(),A&&A.reset()}function u(){s(),Modernizr.history?window.history.pushState({},null,"/"):window.location="/"}function c(t){t.preventDefault(),u()}function l(t,o){var n;n="Yes"===t?o:O.responseNo,$("#question").fadeOut(250,function(){A.createMarker(R,N),A.createPopup(R,N,t,n),A.setLocation(R,N,O.finalZoom),$("#map").removeClass("no-panning"),$("#reset-button").on("click",c)})}function d(t,o){for(var n={type:"Point",coordinates:[o,t]},e="",a=0;a<U.features.length;a++){var r=U.features[a],i=r.geometry,s=q.pointInPolygon(n,i);s&&(e=r.properties&&r.properties.NAME?r.properties.NAME:"NO NAME FOUND")}e?h(e):f()}function h(t){l("Yes",t)}function f(){l("No")}function p(){$("#input-target .loading-text").show(),$("#input-target .default-text").hide(),M()}function g(t){t.preventDefault(),m()}function m(){var t=$("#input-location"),o=t.val();return""!==o?(P(o),Modernizr.history?window.history.pushState({page:"address",address:o},null,"/?address="+encodeURIComponent(o)):window.location="/?address="+encodeURIComponent(o)):y("Please enter an address"),!1}function y(t){$("#alert").html(t).slideDown(100)}function v(){var t=function(t){R=t.coords.latitude,N=t.coords.longitude};B(t)}function M(){var t=function(t){R=t.coords.latitude,N=t.coords.longitude,w(R,N)},o=function(t){console.log(t),alert("Unable to retrieve current position. Geolocation may be disabled on this browser or unavailable on this system."),k()};B(t,o)}function w(){b(R,N),x(R,N)}function b(t,o){R=t,N=o;var n=function(){U.features&&U.features.length>0?d(R,N):window.setTimeout(n,500)};n()}function x(t,o){var n="?latlng="+t+","+o;Modernizr.history?window.history.pushState({page:"latlng",latitude:t,longitude:o},null,n):window.location=n}function k(){$("#input-target .loading-text").hide(),$("#input-target .default-text").show()}function P(t){z(t,O.regionBias,function(t){if(t&&t.results.length>0){var o=t.results[0].geometry.location;R=o.lat,N=o.lng;var n=function(){U.features&&U.features.length>0?d(R,N):window.setTimeout(n,500)};n()}else $("#question").show(),y("No results for this address!")})}function T(t){P(t)}function C(t){t.preventDefault(),Modernizr.history?window.history.pushState({page:"about"},null,"?about"):window.location="?about",I()}function I(){$("#location-form").fadeOut(200,function(){$("#about").fadeIn(200)})}function L(){$("#question").show(),$("#location-form").hide(),$("#about").show()}function D(t){t.preventDefault(),u()}function S(){$("#about").fadeOut(200,function(){$("#location-form").fadeIn(200)})}var A,R,N,q=t("geojson-utils"),z=t("./geocode"),B=t("./current_location"),j=t("./map"),O=t("../config"),U={};window.onpopstate=function(t){if(!t.state)return void a();switch(t.state.page){case"about":I();break;case"latlng":b(t.state.latitude,t.state.longitude);break;case"address":T(t.state.address);break;default:s()}},o(),$.getJSON(O.fileName,function(t){n(t)})},{"../config":1,"./current_location":4,"./geocode":5,"./map":6,"geojson-utils":2}],4:[function(t,o){var n=function(t,o){var n=window.navigator.geolocation,e={enableHighAccuracy:!0,maximumAge:1e4};n?window.setTimeout(function(){n.getCurrentPosition(t,o,e)},0):console.log("Browser does not support geolocation")};o.exports=n},{}],5:[function(t,o){"use strict";var n="http://maps.googleapis.com/maps/api/geocode/json",e=function(t,o,e){var a={address:t,bounds:o,sensor:!1},r=n+"?"+$.param(a);$.ajax(r,{success:e})};o.exports=e},{}],6:[function(t,o){"use strict";var n=t("../config"),e='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',a="http://tile.stamen.com/toner/{z}/{x}/{y}.png",r="/img/marker.svg";window.devicePixelRatio>1&&(a="http://tile.stamen.com/toner/{z}/{x}/{y}@2x.png"),Modernizr.svg||(r="/img/marker.png");var i=function(t){this.json=t,this.map=L.map("map",{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,closePopupOnClick:!1,keyboard:!1,zoomControl:!1}),this.markers=[]},s=L.icon({iconUrl:r,shadowUrl:"/img/marker_shadow.png",iconSize:[36,43],shadowSize:[100,50],iconAnchor:[18,43],shadowAnchor:[40,44],popupAnchor:[0,-50]});i.prototype.render=function(){L.tileLayer(a,{attribution:e,maxZoom:23}).addTo(this.map),L.geoJson(this.json,{style:function(){var t=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),e="rgb("+t+" ,"+o+","+n+")";return{color:e,weight:5,opacity:.1}}}).addTo(this.map),this.reset()},i.prototype.reset=function(){this.removeMarkers(),this.setLocation(n.latitude,n.longitude,n.initialZoom),this.map.closePopup(),this.map.dragging.disable()},i.prototype.setLocation=function(t,o,n){return t+=.01,this.map.setView([t,o],n),this.map.dragging.enable(),!0},i.prototype.createMarker=function(t,o){var n=L.marker([t,o],{icon:s,clickable:!1}).addTo(this.map);return this.markers.push(n),!0},i.prototype.createPopup=function(t,o,n,e){var a="";a+='<div class="popup-background"><svg class="svg-popup"><use xlink:href="#svg-popup"></svg></div>',a+="<h2>"+n+"</h2><p>"+e+"</p>",a+='<button id="reset-button">Again?</button>',L.popup({autoPan:!1,closeButton:!1}).setLatLng([t,o]).setContent(a).openOn(this.map)},i.prototype.removeMarkers=function(){for(var t=0;t<this.markers.length;t++)this.map.removeLayer(this.markers[t]);return!0},o.exports=i},{"../config":1}]},{},[3]);