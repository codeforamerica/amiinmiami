!function t(o,e,n){function i(r,s){if(!e[r]){if(!o[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[r]={exports:{}};o[r][0].call(l.exports,function(t){var e=o[r][1][t];return i(e?e:t)},l,l.exports,t,o,e,n)}return e[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({"./src/application.js":[function(t){"use strict";function o(){Modernizr.history&&window.history.replaceState(null,null,document.URL),i(),v()}function e(t){B=t,I=new q(t),$("#input-target").on("click",p),$("#location-form").on("submit",g),$("#about-link").on("click",j),$("#about-close").on("click",C),$("#example-link").on("click",a),$("#dismiss-ie-browser").on("click",n),$("#input-location").focus(),I.render(),$("#map").addClass("no-panning"),$(document).keydown(function(t){27===t.which&&t.ctrlKey===!1&&t.metaKey===!1&&u()}),Modernizr.svg||($("#fallback-shield").html('<img src="/img/white_shield.png">'),$("#fallback-flag-tag").html('<img src="/img/flag-tag.png" alt="Code for America" width="32" height="8">'))}function n(t){t.preventDefault(),$(".ie-browser").hide()}function i(){var t=window.location.search.substr(1),o=t.split("="),e=o[0],n=o[1];switch(e){case"about":U();break;case"latlng":if(!n){s();break}var i=parseFloat(n.split(",")[0]),a=parseFloat(n.split(",")[1]);i&&a?b(i,a):s();break;case"address":n?S(decodeURIComponent(n)):s();break;default:s()}}function a(t){t.preventDefault();var o=$("#example-link").text();$("#input-location").val(o)}function r(){var t=z.examples||[];if(t.length>0){var o=Math.floor(Math.random()*t.length);$("#example-link").text(t[o])}}function s(){$("#question").show(),$("#input-location").val(""),$("#alert").hide(),D(),k(),$("#question").fadeIn(150),$("#input-location").focus(),$("#map").addClass("no-panning"),r(),I&&I.reset()}function u(){s(),Modernizr.history?window.history.pushState({},null,"/"):window.location="/"}function c(t){t.preventDefault(),u()}function l(t,o){var e;e="Yes"===t?o:z.responseNo,$("#question").fadeOut(250,function(){I.createMarker(L,A),I.createPopup(L,A,t,e),I.setLocation(L,A,z.finalZoom),$("#map").removeClass("no-panning"),$("#reset-button").on("click",c)})}function d(t,o){for(var e={type:"Point",coordinates:[o,t]},n="",i=0;i<B.features.length;i++){var a=B.features[i],r=a.geometry,s=N.pointInPolygon(e,r);s&&(n=a.properties&&a.properties.NAME?a.properties.NAME:"NO NAME FOUND")}n?h(n):f()}function h(t){l("Yes",t)}function f(){l("No")}function p(){$("#input-target .loading-text").show(),$("#input-target .default-text").hide(),M()}function g(t){t.preventDefault(),m()}function m(){var t=$("#input-location"),o=t.val();return""!==o?(P(o),Modernizr.history?window.history.pushState({page:"address",address:o},null,"/?address="+encodeURIComponent(o)):window.location="/?address="+encodeURIComponent(o)):y("Please enter an address"),!1}function y(t){$("#alert").html(t).slideDown(100)}function v(){var t=function(t){L=t.coords.latitude,A=t.coords.longitude};O(t)}function M(){var t=function(t){L=t.coords.latitude,A=t.coords.longitude,w(L,A)},o=function(t){console.log(t),alert("Unable to retrieve current position. Geolocation may be disabled on this browser or unavailable on this system."),k()};O(t,o)}function w(){b(L,A),x(L,A)}function b(t,o){L=t,A=o;var e=function(){B.features&&B.features.length>0?d(L,A):window.setTimeout(e,500)};e()}function x(t,o){var e="?latlng="+t+","+o;Modernizr.history?window.history.pushState({page:"latlng",latitude:t,longitude:o},null,e):window.location=e}function k(){$("#input-target .loading-text").hide(),$("#input-target .default-text").show()}function P(t){R(t,z.regionBias,function(t){if(t&&t.results.length>0){var o=t.results[0].geometry.location;L=o.lat,A=o.lng;var e=function(){B.features&&B.features.length>0?d(L,A):window.setTimeout(e,500)};e()}else $("#question").show(),y("No results for this address!")})}function S(t){P(t)}function j(t){t.preventDefault(),Modernizr.history?window.history.pushState({page:"about"},null,"?about"):window.location="?about",T()}function T(){$("#location-form").fadeOut(200,function(){$("#about").fadeIn(200)})}function U(){$("#question").show(),$("#location-form").hide(),$("#about").show()}function C(t){t.preventDefault(),u()}function D(){$("#about").fadeOut(200,function(){$("#location-form").fadeIn(200)})}var I,L,A,N=t("geojson-utils"),R=t("./geocode"),O=t("./current_location"),q=t("./map"),z=t("../config"),B={};window.onpopstate=function(t){if(!t.state)return void i();switch(t.state.page){case"about":T();break;case"latlng":b(t.state.latitude,t.state.longitude);break;case"address":S(t.state.address);break;default:s()}},o(),$.getJSON(z.fileName,function(t){e(t)})},{"../config":"/Users/erniehsiung/Sites/amiinmiami/config.js","./current_location":"/Users/erniehsiung/Sites/amiinmiami/src/current_location.js","./geocode":"/Users/erniehsiung/Sites/amiinmiami/src/geocode.js","./map":"/Users/erniehsiung/Sites/amiinmiami/src/map.js","geojson-utils":"/Users/erniehsiung/Sites/amiinmiami/node_modules/geojson-utils/geojson-utils.js"}],"/Users/erniehsiung/Sites/amiinmiami/config.js":[function(t,o){var e={name:"Miami",latitude:25.7667,longitude:-80.2,regionBias:"25.25,-80|26,-79",initialZoom:13,finalZoom:14,fileName:"/data/region.geojson",tagline:"Because there is more to Miami than you think there is.",about:"Las Vegas is one of the most visited cities in the world, and yet its most famous destination &mdash; a 6.8km boulevard of extravagantly themed casinos commonly known as ‘The Strip’ &mdash; is actually located outside of Las Vegas city limits.  To add to the confusion, the city’s true borders are often jagged and full of small holes.  According to the U.S. Postal Service, local residents may still claim a Las Vegas address, even if they are under the jurisdiction of one of the surrounding unincorporated communities throughout Clark County.  As a result, the City of Las Vegas requires residents verify that they reside within city limits to receive city services.",responseYes:"You are within city limits!",responseNo:"You're UMSA or not in the County.",examples:["90 NW 29th Street","9806 NE 2nd Ave","8821 SW 136th Street"]};o.exports=e},{}],"/Users/erniehsiung/Sites/amiinmiami/node_modules/geojson-utils/geojson-utils.js":[function(t,o){!function(){function t(t){for(var o=[],e=[],n=0;n<t[0].length;n++)o.push(t[0][n][1]),e.push(t[0][n][0]);return o=o.sort(function(t,o){return t-o}),e=e.sort(function(t,o){return t-o}),[[o[0],e[0]],[o[o.length-1],e[e.length-1]]]}function e(t,o,e){for(var n=[[0,0]],i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)n.push(e[i][a]);n.push(e[i][0]),n.push([0,0])}for(var r=!1,i=0,a=n.length-1;i<n.length;a=i++)n[i][0]>o!=n[a][0]>o&&t<(n[a][1]-n[i][1])*(o-n[i][0])/(n[a][0]-n[i][0])+n[i][1]&&(r=!r);return r}var n=this.gju={};"undefined"!=typeof o&&o.exports&&(o.exports=n),n.lineStringsIntersect=function(t,o){for(var e=[],n=0;n<=t.coordinates.length-2;++n)for(var i=0;i<=o.coordinates.length-2;++i){var a={x:t.coordinates[n][1],y:t.coordinates[n][0]},r={x:t.coordinates[n+1][1],y:t.coordinates[n+1][0]},s={x:o.coordinates[i][1],y:o.coordinates[i][0]},u={x:o.coordinates[i+1][1],y:o.coordinates[i+1][0]},c=(u.x-s.x)*(a.y-s.y)-(u.y-s.y)*(a.x-s.x),l=(r.x-a.x)*(a.y-s.y)-(r.y-a.y)*(a.x-s.x),d=(u.y-s.y)*(r.x-a.x)-(u.x-s.x)*(r.y-a.y);if(0!=d){var h=c/d,f=l/d;h>=0&&1>=h&&f>=0&&1>=f&&e.push({type:"Point",coordinates:[a.x+h*(r.x-a.x),a.y+h*(r.y-a.y)]})}}return 0==e.length&&(e=!1),e},n.pointInBoundingBox=function(t,o){return!(t.coordinates[1]<o[0][0]||t.coordinates[1]>o[1][0]||t.coordinates[0]<o[0][1]||t.coordinates[0]>o[1][1])},n.pointInPolygon=function(o,i){for(var a="Polygon"==i.type?[i.coordinates]:i.coordinates,r=!1,s=0;s<a.length;s++)n.pointInBoundingBox(o,t(a[s]))&&(r=!0);if(!r)return!1;for(var u=!1,s=0;s<a.length;s++)e(o.coordinates[1],o.coordinates[0],a[s])&&(u=!0);return u},n.pointInMultiPolygon=function(o,i){for(var a="MultiPolygon"==i.type?[i.coordinates]:i.coordinates,r=!1,s=!1,u=0;u<a.length;u++){for(var c=a[u],l=0;l<c.length;l++)r||n.pointInBoundingBox(o,t(c[l]))&&(r=!0);if(!r)return!1;for(var l=0;l<c.length;l++)s||e(o.coordinates[1],o.coordinates[0],c[l])&&(s=!0)}return s},n.numberToRadius=function(t){return t*Math.PI/180},n.numberToDegree=function(t){return 180*t/Math.PI},n.drawCircle=function(t,o,e){for(var i=[o.coordinates[1],o.coordinates[0]],a=t/1e3/6371,r=[n.numberToRadius(i[0]),n.numberToRadius(i[1])],e=e||15,s=[[i[0],i[1]]],u=0;e>u;u++){var c=2*Math.PI*u/e,l=Math.asin(Math.sin(r[0])*Math.cos(a)+Math.cos(r[0])*Math.sin(a)*Math.cos(c)),d=r[1]+Math.atan2(Math.sin(c)*Math.sin(a)*Math.cos(r[0]),Math.cos(a)-Math.sin(r[0])*Math.sin(l));s[u]=[],s[u][1]=n.numberToDegree(l),s[u][0]=n.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},n.rectangleCentroid=function(t){var o=t.coordinates[0],e=o[0][0],n=o[0][1],i=o[2][0],a=o[2][1],r=i-e,s=a-n;return{type:"Point",coordinates:[e+r/2,n+s/2]}},n.pointDistance=function(t,o){var e=t.coordinates[0],i=t.coordinates[1],a=o.coordinates[0],r=o.coordinates[1],s=n.numberToRadius(r-i),u=n.numberToRadius(a-e),c=Math.pow(Math.sin(s/2),2)+Math.cos(n.numberToRadius(i))*Math.cos(n.numberToRadius(r))*Math.pow(Math.sin(u/2),2),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return 6371*l*1e3},n.geometryWithinRadius=function(t,o,e){if("Point"==t.type)return n.pointDistance(t,o)<=e;if("LineString"==t.type||"Polygon"==t.type){var i,a={};i="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var r in i)if(a.coordinates=i[r],n.pointDistance(a,o)>e)return!1}return!0},n.area=function(t){for(var o,e,n=0,i=t.coordinates[0],a=i.length-1,r=0;r<i.length;a=r++){var o={x:i[r][1],y:i[r][0]},e={x:i[a][1],y:i[a][0]};n+=o.x*e.y,n-=o.y*e.x}return n/=2},n.centroid=function(t){for(var o,e,i,a=0,r=0,s=t.coordinates[0],u=s.length-1,c=0;c<s.length;u=c++){var e={x:s[c][1],y:s[c][0]},i={x:s[u][1],y:s[u][0]};o=e.x*i.y-i.x*e.y,a+=(e.x+i.x)*o,r+=(e.y+i.y)*o}return o=6*n.area(t),{type:"Point",coordinates:[r/o,a/o]}},n.simplify=function(t,o){o=o||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var e,n,i,a,r,s,u,c,l,d,h,f,p,g,m,y,v,M,w,b=Math.PI/180*.5,x=new Array,k=new Array,$=new Array;if(t.length<3)return t;for(e=t.length,d=360*o/(2*Math.PI*6378137),d*=d,i=0,k[0]=0,$[0]=e-1,n=1;n>0;)if(a=k[n-1],r=$[n-1],n--,r-a>1){for(h=t[r].lng()-t[a].lng(),f=t[r].lat()-t[a].lat(),Math.abs(h)>180&&(h=360-Math.abs(h)),h*=Math.cos(b*(t[r].lat()+t[a].lat())),p=h*h+f*f,s=a+1,u=a,l=-1;r>s;s++)g=t[s].lng()-t[a].lng(),m=t[s].lat()-t[a].lat(),Math.abs(g)>180&&(g=360-Math.abs(g)),g*=Math.cos(b*(t[s].lat()+t[a].lat())),y=g*g+m*m,v=t[s].lng()-t[r].lng(),M=t[s].lat()-t[r].lat(),Math.abs(v)>180&&(v=360-Math.abs(v)),v*=Math.cos(b*(t[s].lat()+t[r].lat())),w=v*v+M*M,c=y>=p+w?w:w>=p+y?y:(g*f-m*h)*(g*f-m*h)/p,c>l&&(u=s,l=c);d>l?(x[i]=a,i++):(n++,k[n-1]=u,$[n-1]=r,n++,k[n-1]=a,$[n-1]=u)}else x[i]=a,i++;x[i]=e-1,i++;for(var P=new Array,s=0;i>s;s++)P.push(t[x[s]]);return P.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},n.destinationPoint=function(t,o,e){e/=6371,o=n.numberToRadius(o);var i=n.numberToRadius(t.coordinates[0]),a=n.numberToRadius(t.coordinates[1]),r=Math.asin(Math.sin(a)*Math.cos(e)+Math.cos(a)*Math.sin(e)*Math.cos(o)),s=i+Math.atan2(Math.sin(o)*Math.sin(e)*Math.cos(a),Math.cos(e)-Math.sin(a)*Math.sin(r));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[n.numberToDegree(s),n.numberToDegree(r)]}}}()},{}],"/Users/erniehsiung/Sites/amiinmiami/src/current_location.js":[function(t,o){var e=function(t,o){var e=window.navigator.geolocation,n={enableHighAccuracy:!0,maximumAge:1e4};e?window.setTimeout(function(){e.getCurrentPosition(t,o,n)},0):console.log("Browser does not support geolocation")};o.exports=e},{}],"/Users/erniehsiung/Sites/amiinmiami/src/geocode.js":[function(t,o){"use strict";var e="https://maps.googleapis.com/maps/api/geocode/json",n=function(t,o,n){var i={address:t,bounds:o,sensor:!1},a=e+"?"+$.param(i);$.ajax(a,{success:n})};o.exports=n},{}],"/Users/erniehsiung/Sites/amiinmiami/src/map.js":[function(t,o){"use strict";var e=t("../config"),n='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',i="//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",a="/img/marker.svg";window.devicePixelRatio>1&&(i="//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}@2x.png"),Modernizr.svg||(a="/img/marker.png");var r=function(t){this.json=t,this.map=L.map("map",{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,closePopupOnClick:!1,keyboard:!1,zoomControl:!1}),this.markers=[]},s=L.icon({iconUrl:a,shadowUrl:"/img/marker_shadow.png",iconSize:[36,43],shadowSize:[100,50],iconAnchor:[18,43],shadowAnchor:[40,44],popupAnchor:[0,-50]});r.prototype.render=function(){L.tileLayer(i,{attribution:n,maxZoom:23}).addTo(this.map),L.geoJson(this.json,{style:function(){var t=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),e=Math.floor(255*Math.random()),n="rgb("+t+" ,"+o+","+e+")";return{color:n,weight:5,opacity:.1}}}).addTo(this.map),this.reset()},r.prototype.reset=function(){this.removeMarkers(),this.setLocation(e.latitude,e.longitude,e.initialZoom),this.map.closePopup(),this.map.dragging.disable()},r.prototype.setLocation=function(t,o,e){return t+=.01,this.map.setView([t,o],e),this.map.dragging.enable(),!0},r.prototype.createMarker=function(t,o){var e=L.marker([t,o],{icon:s,clickable:!1}).addTo(this.map);return this.markers.push(e),!0},r.prototype.createPopup=function(t,o,e,n){var i="";i+='<div class="popup-background"><svg class="svg-popup"><use xlink:href="#svg-popup"></svg></div>',i+="<h2>"+e+"</h2><p>"+n+"</p>",i+='<button id="reset-button">Again?</button>',L.popup({autoPan:!1,closeButton:!1}).setLatLng([t,o]).setContent(i).openOn(this.map)},r.prototype.removeMarkers=function(){for(var t=0;t<this.markers.length;t++)this.map.removeLayer(this.markers[t]);return!0},o.exports=r},{"../config":"/Users/erniehsiung/Sites/amiinmiami/config.js"}]},{},["./src/application.js"]);